<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>Registro de Créditos</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Estilos propios -->
  <link href="{{ url_for('static', filename='styles.css') }}" rel="stylesheet" />

  <!-- Librería para gráficas -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <main class="container">
    <h1>Créditos</h1>

    <!-- =======================
         Sección: Formulario de registro
         ======================= -->
    <section class="card">
      <h2>Registrar nuevo crédito</h2>
      <form id="form-credito">
        <div class="grid">
          <!-- Campos del formulario -->
          <label>Cliente
            <input name="cliente" id="cliente" required />
          </label>
          <label>Monto
            <input name="monto" id="monto" type="number" step="0.01" min="0" required />
          </label>
          <label>Tasa interés anual (%)
            <input name="tasa_interes" id="tasa_interes" type="number" step="0.01" min="0" required />
          </label>
          <label>Plazo (meses)
            <input name="plazo" id="plazo" type="number" min="1" required />
          </label>
          <label>Fecha otorgamiento
            <input name="fecha_otorgamiento" id="fecha_otorgamiento" type="date" required />
          </label>
        </div>

        <!-- Botones de acción -->
        <div class="actions">
          <button type="submit" id="btn-guardar">Guardar</button>
          <!-- Botón visible solo al editar -->
          <button type="button" id="btn-cancelar" class="secondary" hidden>Cancelar edición</button>
        </div>

        <!-- Mensaje de error de validación -->
        <p id="form-error" class="error" hidden></p>
      </form>
    </section>

    <!-- =======================
         Sección: Lista de créditos
         ======================= -->
    <section class="card">
      <h2>Lista de créditos</h2>
      <table id="tabla-creditos">
        <thead>
          <tr>
            <th>ID</th>
            <th>Cliente</th>
            <th>Monto</th>
            <th>Tasa %</th>
            <th>Plazo</th>
            <th>Fecha</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody></tbody> <!-- Aquí se llena dinámicamente con JS -->
      </table>
    </section>

    <!-- =======================
         Sección: Gráfica total otorgado
         ======================= -->
    <section class="card">
      <h2>Total de créditos otorgados</h2>
      <canvas id="chartTotal"></canvas>
    </section>

    <!-- =======================
         Sección: Gráfica opcional por cliente
         ======================= -->
    <section class="card">
      <h2>Distribución por cliente</h2>
      <canvas id="chartClientes"></canvas>
    </section>
  </main>

  <!-- Script propio para manejar lógica con JS -->
  <script src="{{ url_for('static', filename='main.js') }}"></script>
</body>
</html>
